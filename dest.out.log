+ [[ -n '' ]]
+ run_cmd MIGTD_POLICY_FILE=./config/policy.json MIGTD_ROOT_CA_FILE=./config/Intel_SGX_Provisioning_Certification_RootCA.cer RUST_BACKTRACE=1 RUST_LOG=info -- ./target/release/migtd --role destination --request-id 1
+ env_kv=()
+ local env_kv
+ [[ 10 -gt 0 ]]
+ case $1 in
+ env_kv+=("$1")
+ shift
+ [[ 9 -gt 0 ]]
+ case $1 in
+ env_kv+=("$1")
+ shift
+ [[ 8 -gt 0 ]]
+ case $1 in
+ env_kv+=("$1")
+ shift
+ [[ 7 -gt 0 ]]
+ case $1 in
+ env_kv+=("$1")
+ shift
+ [[ 6 -gt 0 ]]
+ case $1 in
+ shift
+ break
+ false
+ env MIGTD_POLICY_FILE=./config/policy.json MIGTD_ROOT_CA_FILE=./config/Intel_SGX_Provisioning_Certification_RootCA.cer RUST_BACKTRACE=1 RUST_LOG=info ./target/release/migtd --role destination --request-id 1
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] Migration information:
[2025-08-25T19:39:09Z INFO  migtd::cvmemu]   Request ID: 1
[2025-08-25T19:39:09Z INFO  migtd::cvmemu]   Role: Destination
[2025-08-25T19:39:09Z INFO  migtd::cvmemu]   Target TD UUID: [1, 2, 3, 4]
[2025-08-25T19:39:09Z INFO  migtd::cvmemu]   Binding Handle: 0x1234
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] TCP server started successfully on: 127.0.0.1:8001
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] MIGTD_POLICY_FILE set to: ./config/policy.json
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] MIGTD_ROOT_CA_FILE set to: ./config/Intel_SGX_Provisioning_Certification_RootCA.cer
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] File-based emulation initialized with real file access. Files will be loaded on demand from:
[2025-08-25T19:39:09Z INFO  migtd::cvmemu]   Policy: ./config/policy.json
[2025-08-25T19:39:09Z INFO  migtd::cvmemu]   Root CA: ./config/Intel_SGX_Provisioning_Certification_RootCA.cer
[2025-08-25T19:39:09Z INFO  migtd] MigTD Version - 0.5.1
    
[2025-08-25T19:39:09Z INFO  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_extend_rtmr emulated - mr_index: 2, digest: [35, 14, f1, 0b, 49, 6b, 94, c2]
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_rd emulated: bh=0x1234 field=0x9810000300000018 uuid=[1,2,3,4] => 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_rd emulated: bh=0x1234 field=0x9810000300000019 uuid=[1,2,3,4] => 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_rd emulated: bh=0x1234 field=0x981000030000001a uuid=[1,2,3,4] => 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_rd emulated: bh=0x1234 field=0x981000030000001b uuid=[1,2,3,4] => 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_sys_rd emulated (default): field=0x0 => 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_sys_rd emulated (default): field=0x0 => 0x0
[2025-08-25T19:39:09Z INFO  tdx_tdcall_emu::tdreport_emu] RATLS: Using mock TD report for test_disable_ra_and_accept_all feature
[2025-08-25T19:39:09Z INFO  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdvmcall_get_quote emulated using vTPM interface
[2025-08-25T19:39:09Z INFO  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdvmcall_get_quote completed successfully, quote size: 244
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_wr emulated: bh=0x1234 field=0x9810000100000020 uuid=[1,2,3,4] <= 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_wr emulated: bh=0x1234 field=0x9810000300000010 uuid=[1,2,3,4] <= 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_wr emulated: bh=0x1234 field=0x9810000300000011 uuid=[1,2,3,4] <= 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_wr emulated: bh=0x1234 field=0x9810000300000012 uuid=[1,2,3,4] <= 0x0
[2025-08-25T19:39:09Z WARN  tdx_tdcall_emu::tdx_emu] AzCVMEmu: tdcall_servtd_wr emulated: bh=0x1234 field=0x9810000300000013 uuid=[1,2,3,4] <= 0x0
[2025-08-25T19:39:09Z INFO  migtd::migration::session] Set MSK and report status
    
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] exchange_msk() returned Ok
[2025-08-25T19:39:09Z INFO  tdx_tdcall_emu::tdx_emu] tdvmcall_migtd_reportstatus: request_id=1 status=0 interrupt=0x50
[2025-08-25T19:39:09Z INFO  tdx_tdcall_emu::tdx_emu] tdvmcall_migtd_reportstatus: triggering interrupt 0x50
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] report_status completed successfully
[2025-08-25T19:39:09Z INFO  migtd::cvmemu] Migration key exchange successful!
